<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRI Test System</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
    <div class="container">
        <h1>HRI Test System</h1>
        <p id="status" class="status-message">Status: Ready</p>

        <div class="is_row">
            <div class="is_col">
                <div class="initial_setup is_row">
                    <!-- Solution Pipeline -->
                    <div class="step">
                        <h2>(1) Select Pipeline</h2>
                        <div class="is_row space-between">
                            <button class="btn" onclick="selectSolution()">Select Pipeline</button>
                            <select id="solution_select" class="dropdown">
                                <option value="">-- pipeline --</option>
                                <option value="YOLO and LLM">YOLO and LLM</option>
                                <option value="VLM and YOLO World">VLM and YOLO World</option>
                            </select>
                        </div>
                    </div>

                    <!-- Step 2: Camera Search -->
                    <div class="step">
                        <h2>(2) Search for Cameras</h2>
                        <button class="btn" onclick="searchCameras()">Search Cameras</button>
                    </div>

                    <!-- Step 3: Camera Connection -->
                    <div class="step">
                        <h2>(3) Connect to a Camera</h2>
                        <div class="is_row space-between">
                            <button class="btn" onclick="connectCamera()">Connect</button>
                            <select id="camera_select" class="dropdown">
                                <option disabled selected>Select your Camera</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="is_row">
        <!-- (4) Record a Clue -->
        <div class="step is_col">
            <h2>(4) Record a Clue</h2>
            <button class="btn" onclick="startRecording()">Start Recording</button>
            <button class="btn" onclick="stopRecording()">Stop Recording</button>
            <span id="recording_indicator" style="display:none; color:red; font-weight:bold;">‚óè Recording...</span>
        </div>
    
        <!-- (4) Enter a Clue -->
        <div class="step is_col">
            <h2>(4) Enter a Clue</h2>
            <textarea id="clue_input" class="clue-input" placeholder="Enter your clue here"></textarea>
            <button class="btn" onclick="generateAnswer()">Generate Answer</button>
        </div>
    </div>

        <!-- Step 3: Object Detection and Clue Input -->
        <div class="detection is_row">
            <!-- Video Stream -->
            <div class="detection-left is_col">
                <h2>Object Detection</h2>
                <img id="video_feed" alt="Camera Feed" class="video-feed">
            </div>

            <!-- Clue Input and Results -->
            <div class="detection-right is_col">

                <h3>Detection Result and Selected Object</h3>
                <p id="answer_output" class="result">Answer: </p>
                <p id="latency_output" class="result">Latency: </p>
                <p id="point0"></p>
                <p id="point1"></p>
                
                <!-- "Answer:" turned into a button -->
                <p class="result">
                    <button id="answer_output_btn" class="text-button" onclick="playLLMOutput()">
                        Full Answer üîä
                    </button>
                    <span id="answer_text"></span>
                </p>


                <!-- Step 5: Decision -->
                <div class="interaction is_col">
                    <h2>(5) Evaluate</h2>
                    <div class="decision_box is_row">
                    <!-- Accept Button -->
                    <button class="correct_btn" onclick="acceptDecision()">Correct</button>
                    <!-- Reject Button -->
                    <button class="wrong_btn" onclick="rejectDecision()">Wrong</button>
                    </div>
              
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
